# Sabor Express â€“ OtimizaÃ§Ã£o Inteligente de Rotas de Entrega

###  Projeto AcadÃªmico â€” InteligÃªncia Artificial Aplicada

---

## DescriÃ§Ã£o do Problema

A empresa fictÃ­cia **Sabor Express**, que realiza entregas de alimentos na regiÃ£o central da cidade, enfrenta atrasos e custos elevados devido Ã  **definiÃ§Ã£o manual das rotas** pelos entregadores.  

O objetivo deste projeto Ã© desenvolver uma **soluÃ§Ã£o baseada em InteligÃªncia Artificial (IA)** capaz de **agrupar entregas prÃ³ximas** e **sugerir as melhores rotas de entrega**, reduzindo tempo e distÃ¢ncia percorrida.

---

## Objetivos do Projeto

- Implementar algoritmos de **IA clÃ¡ssicos** para otimizaÃ§Ã£o de rotas.  
- Representar o mapa da cidade como um **grafo ponderado**.  
- Aplicar **clustering (K-Means)** para agrupar pedidos por regiÃ£o.  
- Usar **busca heurÃ­stica (A*)** e **heurÃ­stica TSP (2-opt)** para otimizar rotas dentro de cada cluster.  
- Visualizar as entregas e rotas em um **mapa interativo (Folium)**.  

---

## Algoritmos e Conceitos Utilizados

| Tipo | Algoritmo | AplicaÃ§Ã£o |
|------|------------|-----------|
| Aprendizado nÃ£o supervisionado | **K-Means** | Agrupamento de entregas prÃ³ximas |
| Busca heurÃ­stica | **A*** (A-Star) | Menor caminho entre dois pontos no grafo |
| OtimizaÃ§Ã£o local | **2-opt (TSP HeurÃ­stico)** | Rota Ã³tima dentro de cada cluster |
| Estrutura de dados | **Grafo ponderado (NetworkX)** | RepresentaÃ§Ã£o das conexÃµes entre locais |
| VisualizaÃ§Ã£o geogrÃ¡fica | **Folium** | Mapa interativo com clusters e rotas |

---

##  Arquitetura e Fluxo da SoluÃ§Ã£o

```
dados -> clusterizaÃ§Ã£o (K-Means)
      -> construÃ§Ã£o de grafo (NetworkX)
      -> otimizaÃ§Ã£o de rotas (A* / 2-opt)
      -> visualizaÃ§Ã£o no mapa (Folium)
```

### Estrutura de Pastas

```
sabor-express/
â”œâ”€ app.py
â”œâ”€ src/
â”‚  â”œâ”€ __init__.py
â”‚  â”œâ”€ clustering.py
â”‚  â”œâ”€ graph.py
â”‚  â”œâ”€ routing.py
â”‚  â””â”€ utils.py
â”œâ”€ data/
â”‚  â”œâ”€ pontos_entrega.csv
â”‚  â”œâ”€ matriz_distancias.csv
â”‚  â””â”€ entregas_clusterizadas.csv
â”œâ”€ templates/
â”‚  â”œâ”€ index.html
â”‚  â””â”€ resultado.html
â”œâ”€ static/
â”‚  â”œâ”€ style.css
â”‚  â””â”€ cluster_plot.html
â””â”€ README.md
```

---

## Principais MÃ³dulos

### `clustering.py`
- Aplica **K-Means** sobre coordenadas (lat, lon).
- Lida com valores ausentes via imputaÃ§Ã£o da mÃ©dia.
- Define automaticamente o nÃºmero ideal de clusters via **Silhouette Score**.

### `graph.py`
- ConstrÃ³i o **grafo de distÃ¢ncias** a partir de uma matriz CSV.
- Implementa o algoritmo **A*** com heurÃ­stica de distÃ¢ncia geogrÃ¡fica.
- Pode usar Dijkstra como fallback (quando sem heurÃ­stica).

### `routing.py`
- Implementa **2-opt**, uma heurÃ­stica eficiente para o **Problema do Caixeiro Viajante (TSP)**.
- Otimiza a rota interna de cada cluster (cada entregador cobre um cluster).

### `utils.py`
- Gera **mapas interativos** com Folium.
- Exibe clusters, pontos e rotas com cores e tooltips informativos.

---

## ExecuÃ§Ã£o do Projeto

### 1. Instalar dependÃªncias
```bash
pip install -r requirements.txt
```

### 2. Estrutura esperada de dados
Arquivo `data/pontos_entrega.csv` (exemplo):
```csv
id,lat,lon,tipo
R1,-23.5530,-46.6313,restaurante
C1,-23.5400,-46.6230,cliente
C2,-23.5650,-46.6400,cliente
```

### 3. Rodar o servidor Flask
```bash
python app.py
```

Acesse no navegador:
```
http://127.0.0.1:5000
```

---

## VisualizaÃ§Ã£o

O sistema gera automaticamente o arquivo:
```
static/cluster_plot.html
```

Visualize no navegador para ver:
- Pontos de entrega coloridos por cluster.
- Linhas de rota otimizadas (em verde).
- Popup com identificador e tipo de ponto.

---

## MÃ©tricas e AvaliaÃ§Ã£o

| MÃ©trica | DescriÃ§Ã£o | Resultado esperado |
|----------|------------|--------------------|
| **Silhouette Score** | Qualidade dos clusters | > 0.5 (bom agrupamento) |
| **DistÃ¢ncia total percorrida** | Soma das arestas percorridas por entregador | ReduÃ§Ã£o em relaÃ§Ã£o Ã  rota manual |
| **Tempo estimado** | Baseado em velocidade mÃ©dia (km/h) | ReduÃ§Ã£o de ~20â€“30% |
| **NÃºmero de clusters** | Determinado automaticamente | Balanceado entre entregadores |

---

## Resultados Observados

- O agrupamento via **K-Means** reduziu a sobreposiÃ§Ã£o de Ã¡reas de entrega.  
- O algoritmo **A*** encontrou rotas eficientes com custo menor.  
- A heurÃ­stica **2-opt** melhorou a rota em cada cluster, reduzindo a distÃ¢ncia total.  
- A visualizaÃ§Ã£o no Folium facilitou a interpretaÃ§Ã£o e anÃ¡lise das zonas de entrega.

---

## LimitaÃ§Ãµes e Melhorias Futuras

| LimitaÃ§Ã£o | PossÃ­vel melhoria |
|------------|------------------|
| DistÃ¢ncias estÃ¡ticas | Integrar dados de trÃ¡fego em tempo real |
| HeurÃ­stica simples | Testar algoritmos genÃ©ticos ou MILP |
| TSP local por cluster | Implementar metaheurÃ­sticas globais (Simulated Annealing, RL) |
| Dados sintÃ©ticos | Integrar API de mapas reais (Google Maps / OpenRouteService) |

---

## ReferÃªncias e InspiraÃ§Ãµes

1. **UPS ORION** â€“ *On-Road Integrated Optimization and Navigation*  
   - Case real de otimizaÃ§Ã£o logÃ­stica com heurÃ­sticas + dados em tempo real.  
   - Fontes: *wired.com*, *jsaer.com*

2. **Medium â€“ â€œOptimizing Logistics: Clustering e MILPâ€**  
   - AplicaÃ§Ã£o prÃ¡tica de K-Means + ProgramaÃ§Ã£o Linear Inteira Mista.  
   - Fonte: *medium.com*

3. **ResearchGate â€“ â€œAI-Powered Route Optimizationâ€**  
   - IntegraÃ§Ã£o de IA e algoritmos heurÃ­sticos em logÃ­stica.  
   - Fonte: *researchgate.net*

4. **Kardinal.ai â€“ Case â€œFresh Product Deliveryâ€**  
   - Planejamento dinÃ¢mico e anÃ¡lise territorial em entregas de perecÃ­veis.  

---

## Autoria

**Saulo Cunha**  
ğŸ“˜ Projeto desenvolvido como parte da disciplina **Artificial Intelligence Fundamentals**  
 Tema: *IA aplicada Ã  otimizaÃ§Ã£o de rotas de entrega (clustering + busca heurÃ­stica)*  

---


## Exemplo de resultado

![Mapa de entregas com clusters e rotas](static/Resultados_Rotas.png)


---

### ConclusÃ£o

> A aplicaÃ§Ã£o desenvolvida demonstra como **tÃ©cnicas clÃ¡ssicas de IA (K-Means, A*) podem gerar ganhos reais em eficiÃªncia logÃ­stica**, reduzindo custos e tempo de entrega â€” exatamente o tipo de valor que sistemas como o **UPS ORION** trouxeram para a indÃºstria.
